---
title: Helm & K8s
---

import { LinkOut } from '@interledger/docs-design-system'
import BackEnv from '/src/partials/backend-variables.mdx'
import AuthEnv from '/src/partials/auth-variables.mdx'
import FrontEnv from '/src/partials/frontend-variables.mdx'
import VarWarn from '/src/partials/variables-warning.mdx'
import { Tabs, TabItem } from '@astrojs/starlight/components'

The production environment consists of:

- [`backend`](/integration/deployment/services/backend-service/)
- [`auth`](/integration/deployment/services/auth-service/)
- [`frontend`](/integration/deployment/services/frontend-service/) (optional but recommended) 

and the following databases:

| Database                 | Function                                |
|--------------------------|-----------------------------------------|
| Tigerbeetle or Postrgres | Accounting                              |
| Postgres                 | Open Payments resources, auth resources |
| Redis                    | STREAM details                          |
| Redis                    | auth sessions                           |

To integrate Rafiki with your own services, view the [integration documentation](/integration/getting-started).


## Running Rafiki in production

To run Rafiki in your production environment you will need to have the following software and tools installed:

### Dependencies:

- <LinkOut href='https://kubernetes.io/releases/download/'>Kubernetes</LinkOut>
- <LinkOut href='https://kubernetes.io/docs/tasks/tools/#kubectl'>
    kubectl
  </LinkOut>
- <LinkOut href='https://helm.sh/docs/intro/install/'>helm</LinkOut>

### Installing the Helm Chart 

A Helm Chart that serves as a template is found <LinkOut href= 'https://github.com/interledger/rafiki/tree/main/infrastructure/helm/rafiki/'>here</LinkOut>.
Once you have installed the dependencies run the following command to install the Helm Chart linked above:

```sh
helm install rafiki https://github.com/interledger/rafiki/tree/main/infrastructure/helm/rafiki
```
This Helm Chart servers as a wrapper for the following charts:

- Bitnami Postgres
- Bitnami Redis
- Rafiki `auth`
- Rafiki `backend`
- Rafiki `frontend`

You must update the environment variables for the following services:

<Tabs>
<TabItem label='auth'>
<AuthEnv />
</TabItem>
<TabItem label='backend'>
<BackEnv />
</TabItem>
<TabItem label='frontend'>
<FrontEnv />
</TabItem>
</Tabs>

### Using Tigerbeetle as the accounting database

If you choose to run Tigerbeetle as your accounting database, then addition to running the Helm Chart for Rafiki you must install the chart for Tigerbeetle as well. 

```sh    
helm install tigerbeetle https://github.com/interledger/rafiki/tree/main/infrastructure/helm/tigerbeetle
```

:::note
Even if you run Tigerbeetle for accounting there will be another Postgres instance that will be spun up for the `auth` services and Open Payments resources.
:::

To change the version of Tigerbeetle you must change the respective tag in the <LinkOut href='https://github.com/interledger/rafiki/blob/main/infrastructure/helm/tigerbeetle/values.yaml'>values.yaml</LinkOut> file for Tigerbeetle.

#### Port Forwarding

In the current alpha version of Rafiki, no ports are exposed by default. You can port-forward the frontend (Admin UI) port by running the following:

```sh
// get list of pod names
kubectl get pods

// port forward
kubectl port-forward rafiki-rafiki-frontend-YOUR-SEQUENCE 3010:3010
```

Now, the Admin UI can be found on localhost:3010.
